(self.webpackChunkbarberttoo_v2=self.webpackChunkbarberttoo_v2||[]).push([[296],{3296:(t,e,n)=>{"use strict";n.r(e),n.d(e,{FaturamentoModule:()=>y});var o=n(8583),a=n(4330),r=n(6304);function i(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(t){i(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"===c(t)&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function g(t){i(1,arguments);var e=s(t),n=e.getDate();return n}var _=n(7716),l=n(3141),d=n(8907),u=n(9047);const p=function(t,e){return{"money--green":t,"money--red":e}};function m(t,e){if(1&t&&(_.TgZ(0,"div",4),_.TgZ(1,"div",5),_.TgZ(2,"div",6),_.TgZ(3,"p",7),_._uU(4,"Compara\xe7\xe3o entre hoje e ontem."),_.qZA(),_.TgZ(5,"div",8),_.TgZ(6,"div",9),_.TgZ(7,"p",10),_.TgZ(8,"span"),_._uU(9,"ontem"),_.qZA(),_.TgZ(10,"span",11),_._uU(11),_.qZA(),_.qZA(),_.TgZ(12,"p",12),_.TgZ(13,"span"),_._uU(14,"hoje"),_.qZA(),_.TgZ(15,"span",11),_._uU(16),_.qZA(),_.qZA(),_.qZA(),_.TgZ(17,"p",13),_.TgZ(18,"span"),_._uU(19,"at\xe9 o momento voc\xea est\xe1 com um balan\xe7o de:"),_.qZA(),_.TgZ(20,"span",14),_._uU(21),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(22,"div",6),_.TgZ(23,"p",7),_._uU(24,"Compara\xe7\xe3o o m\xeas atual e m\xeas passado."),_.qZA(),_.TgZ(25,"div",8),_.TgZ(26,"div",9),_.TgZ(27,"p",10),_.TgZ(28,"span"),_._uU(29,"m\xeas anterior"),_.qZA(),_.TgZ(30,"span",11),_._uU(31),_.qZA(),_.qZA(),_.TgZ(32,"p",12),_.TgZ(33,"span"),_._uU(34,"m\xeas atual"),_.qZA(),_.TgZ(35,"span",11),_._uU(36),_.qZA(),_.qZA(),_.qZA(),_.TgZ(37,"p",13),_.TgZ(38,"span"),_._uU(39,"at\xe9 o momento voc\xea est\xe1 com um balan\xe7o de:"),_.qZA(),_.TgZ(40,"span",14),_._uU(41),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(42,"div",6),_.TgZ(43,"p",7),_._uU(44,"Total de atendimentos nesse m\xeas:"),_.qZA(),_.TgZ(45,"p",15),_._uU(46),_.qZA(),_.qZA(),_.TgZ(47,"div",6),_.TgZ(48,"p",7),_._uU(49,"Maior servi\xe7o prestado:"),_.qZA(),_.TgZ(50,"p",15),_._uU(51),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){const t=_.oxw();_.xp6(11),_.hij("R$ ",t.lucroDiaAnterior.toFixed(2),""),_.xp6(5),_.hij("R$ ",t.lucroDiaAtual.toFixed(2),""),_.xp6(4),_.Q6J("ngClass",_.WLB(10,p,t.lucroDiaAtual-t.lucroDiaAnterior>=0,t.lucroDiaAtual-t.lucroDiaAnterior<0)),_.xp6(1),_.hij("R$ ",(t.lucroDiaAtual-t.lucroDiaAnterior).toFixed(2),""),_.xp6(10),_.hij("R$ ",t.lucroMesPassado.toFixed(2),""),_.xp6(5),_.hij("R$ ",t.lucroMesAtual.toFixed(2),""),_.xp6(4),_.Q6J("ngClass",_.WLB(13,p,t.lucroMesAtual-t.lucroMesPassado>=0,t.lucroMesAtual-t.lucroMesPassado<0)),_.xp6(1),_.hij("R$ ",(t.lucroMesAtual-t.lucroMesPassado).toFixed(2),""),_.xp6(5),_.Oqu(t.agendamentosInMonth),_.xp6(5),_.Oqu(t.servicoMaisRealizado)}}function f(t,e){1&t&&(_.TgZ(0,"div",16),_._UZ(1,"app-loader"),_.qZA())}const h=[{path:"",component:(()=>{class t{constructor(t,e){this.historicoService=t,this.servicosService=e,this.loading=!1,this.historicoMesAtual=[],this.historicoMesPassado=[]}ngOnInit(){this.getHistoricoMesAtual()}getHistoricoMesAtual(){var t=this;return(0,r.Z)(function*(){t.loading=!0,t.historicoService.getHistoricoMesAtual().then(e=>{console.log(e),t.historicoMesAtual=e,t.agendamentosInMonth=e.length,t.lucroMesAtual=t.getLucro(e),t.getServicoMaisRealizado(e)}).catch(e=>{console.log(e),t.loading=!1})})()}getServicoMaisRealizado(t){const e=[];t.forEach(t=>{const n=t.servico.id,o=e.filter(t=>t.id===n);0===o.length?e.push({id:n,qnt:1}):o.find(t=>t.id===n&&(t.qnt+=1))}),console.log(e);let n,o=0;e.forEach(t=>{t.qnt>o&&(o=t.qnt)&&(n=t.id)}),this.servicosService.getServiceById(n).then(t=>{this.servicoMaisRealizado=t.nm_servico,this.getHistoricoMesPassado()}).catch(t=>{console.log(t),this.loading=!1})}getHistoricoMesPassado(){this.loading=!0;const t=function(t){return i(1,arguments),s(t).getMonth()}(new Date);this.historicoService.getHistoricoByDate(0,t).then(t=>{this.lucroMesPassado=this.getLucro(t),this.getComparacaoEntreDias()}).catch(t=>{console.log(t),this.loading=!1})}getComparacaoEntreDias(){const t=g(new Date),e=g(new Date((o=(n=new Date).getFullYear(),a=n.getMonth(),r=n.getDate(),(i=new Date(0)).setFullYear(o,a,r-1),i.setHours(0,0,0,0),i)));var n,o,a,r,i;let c=0,s=0;this.historicoMesAtual.forEach(n=>{g(new Date(n.dt_Realizado))===t&&(c+=n.vl_Pago),g(new Date(n.dt_Realizado))===e&&(s+=n.vl_Pago)}),this.lucroDiaAnterior=s,this.lucroDiaAtual=c,this.loading=!1}getLucro(t){let e=0;return t.forEach(t=>{e+=t.vl_Pago}),e}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(l.l),_.Y36(d.B))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-faturamento"]],decls:9,vars:2,consts:[[1,"faturamento"],[1,"faturamento__header"],["class","faturamento__body",4,"ngIf"],["class","loading",4,"ngIf"],[1,"faturamento__body"],[1,"grid"],[1,"grid__chart"],[1,"grid__chart__title"],[1,"grid__chart__card"],[1,"grid__chart__values"],[1,"grid__chart__values--previous"],[1,"money"],[1,"grid__chart__values--next"],[1,"grid__chart__total"],[1,"money",3,"ngClass"],[1,"money","money--big"],[1,"loading"]],template:function(t,e){1&t&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"div"),_.TgZ(3,"h1"),_._uU(4,"Faturamento"),_.qZA(),_.TgZ(5,"p"),_._uU(6,"Informa\xe7\xf5es sobre ganhos e lucros referente \xe0s datas especificadas abaixo."),_.qZA(),_.qZA(),_.qZA(),_.YNc(7,m,52,16,"div",2),_.YNc(8,f,2,0,"div",3),_.qZA()),2&t&&(_.xp6(7),_.Q6J("ngIf",!e.loading),_.xp6(1),_.Q6J("ngIf",e.loading))},directives:[o.O5,o.mk,u.R],styles:['@import url("https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap");.faturamento[_ngcontent-%COMP%]{padding:16px}.faturamento__header[_ngcontent-%COMP%]{margin-bottom:32px;display:flex;justify-content:space-between;flex-direction:column}@media (min-width: 1140px){.faturamento__header[_ngcontent-%COMP%]{align-items:center;flex-direction:row}}.faturamento__header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#c6932b}.faturamento__header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.faturamento__body[_ngcontent-%COMP%]{overflow:auto}.faturamento__body[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-gap:32px;gap:32px}@media screen and (max-width: 1023px){.faturamento__body[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}.faturamento__body[_ngcontent-%COMP%]   .grid__chart[_ngcontent-%COMP%]{background:#e5e5e5;border:2px solid #c6932b;border-radius:8px;display:flex;flex-direction:column;align-items:center;color:#0d1117;padding:32px}.faturamento__body[_ngcontent-%COMP%]   .grid__chart__title[_ngcontent-%COMP%]{font-weight:700}.faturamento__body[_ngcontent-%COMP%]   .grid__chart__card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.faturamento__body[_ngcontent-%COMP%]   .grid__chart__values[_ngcontent-%COMP%]{display:flex;grid-gap:32px;gap:32px}.faturamento__body[_ngcontent-%COMP%]   .grid__chart__values--next[_ngcontent-%COMP%], .faturamento__body[_ngcontent-%COMP%]   .grid__chart__values--previous[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.faturamento__body[_ngcontent-%COMP%]   .grid__chart__values--next[_ngcontent-%COMP%]   .money[_ngcontent-%COMP%], .faturamento__body[_ngcontent-%COMP%]   .grid__chart__values--previous[_ngcontent-%COMP%]   .money[_ngcontent-%COMP%]{color:#c6932b}.faturamento__body[_ngcontent-%COMP%]   .grid__chart__total[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.faturamento__body[_ngcontent-%COMP%]   .grid__chart[_ngcontent-%COMP%]   .money[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem;display:flex;height:100%;align-items:center}.faturamento__body[_ngcontent-%COMP%]   .grid__chart[_ngcontent-%COMP%]   .money--green[_ngcontent-%COMP%]{color:#008f00}.faturamento__body[_ngcontent-%COMP%]   .grid__chart[_ngcontent-%COMP%]   .money--red[_ngcontent-%COMP%]{color:#e54033}.faturamento__body[_ngcontent-%COMP%]   .grid__chart[_ngcontent-%COMP%]   .money--big[_ngcontent-%COMP%]{font-size:2rem}.faturamento__body[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{margin-top:32px}']}),t})()}];let Z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[[a.Bz.forChild(h)],a.Bz]}),t})();var M=n(4466);let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[[o.ez,Z,M.m]]}),t})()}}]);