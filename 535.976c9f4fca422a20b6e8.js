(self.webpackChunkbarberttoo_v2=self.webpackChunkbarberttoo_v2||[]).push([[535],{8535:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ProfileModule:()=>B});var o=n(8583),r=n(665),i=n(4212),a=n(4466),l=n(8832),s=n(129),c=n(4330),d=n(9976),u=n(9389),m=n(8210),g=n(5853),p=n(2825),_=n(7716),f=n(2577),h=n(1872),C=n(1534),Z=n(285),F=n(9047);function I(e,t){1&e&&(_.TgZ(0,"span"),_._uU(1,"Insira um nome completo"),_.qZA())}function b(e,t){1&e&&(_.TgZ(0,"span"),_._uU(1,"Insira um e-mail v\xe1lido."),_.qZA())}function q(e,t){1&e&&(_.TgZ(0,"span"),_._uU(1,"Insira um CPF v\xe1lido."),_.qZA())}function U(e,t){1&e&&(_.TgZ(0,"span"),_._uU(1,"Insira um celular v\xe1lido."),_.qZA())}function v(e,t){1&e&&(_.TgZ(0,"span"),_._uU(1,"Insira uma data de nascimento."),_.qZA())}function A(e,t){1&e&&_._UZ(0,"app-loader")}function x(e,t){if(1&e){const e=_.EpF();_.TgZ(0,"form",4),_.NdJ("ngSubmit",function(){return _.CHM(e),_.oxw().onSubmit()}),_.TgZ(1,"div",5),_._UZ(2,"input",6),_.TgZ(3,"label"),_._uU(4,"Nome completo:"),_.qZA(),_.TgZ(5,"div",7),_.YNc(6,I,2,0,"span",8),_.qZA(),_.qZA(),_.TgZ(7,"div",5),_._UZ(8,"input",9),_.TgZ(9,"label"),_._uU(10,"E-mail:"),_.qZA(),_.TgZ(11,"div",7),_.YNc(12,b,2,0,"span",8),_.qZA(),_.qZA(),_.TgZ(13,"div",5),_._UZ(14,"input",10),_.TgZ(15,"label"),_._uU(16,"CPF:"),_.qZA(),_.TgZ(17,"div",7),_.YNc(18,q,2,0,"span",8),_.qZA(),_.qZA(),_.TgZ(19,"div",5),_._UZ(20,"input",11),_.TgZ(21,"label"),_._uU(22,"Celular:"),_.qZA(),_.TgZ(23,"div",7),_.YNc(24,U,2,0,"span",8),_.qZA(),_.qZA(),_.TgZ(25,"div",5),_._UZ(26,"input",12),_.TgZ(27,"label"),_._uU(28,"Data de nascimento:"),_.qZA(),_.TgZ(29,"div",7),_.YNc(30,v,2,0,"span",8),_.qZA(),_.qZA(),_.TgZ(31,"div",13),_.TgZ(32,"button"),_._uU(33),_.YNc(34,A,1,0,"app-loader",8),_.qZA(),_.qZA(),_.qZA()}if(2&e){const e=_.oxw();_.Q6J("formGroup",e.form),_.xp6(6),_.Q6J("ngIf",e.getForm().nm_Cliente.touched&&e.getForm().nm_Cliente.errors||e.getForm().nm_Cliente.errors&&e.submitted),_.xp6(6),_.Q6J("ngIf",e.getForm().ds_Email.touched&&e.getForm().ds_Email.errors||e.getForm().ds_Email.errors&&e.submitted),_.xp6(2),_.uIk("disabled","true"),_.xp6(4),_.Q6J("ngIf",e.getForm().cd_Cpf.touched&&e.getForm().cd_Cpf.errors||e.getForm().cd_Cpf.errors&&e.submitted),_.xp6(6),_.Q6J("ngIf",e.getForm().cd_Celular.touched&&e.getForm().cd_Celular.errors||e.getForm().cd_Celular.errors&&e.submitted),_.xp6(2),_.uIk("disabled","true"),_.xp6(4),_.Q6J("ngIf",e.getForm().dt_BirthDate.touched&&e.getForm().dt_BirthDate.errors||e.getForm().dt_BirthDate.errors&&e.submitted),_.xp6(3),_.hij(" ",e.loadingUpdate?"":"Atualizar dados"," "),_.xp6(1),_.Q6J("ngIf",e.loadingUpdate)}}function T(e,t){1&e&&(_.TgZ(0,"span"),_._uU(1,"Insira um nome completo"),_.qZA())}function P(e,t){1&e&&(_.TgZ(0,"span"),_._uU(1,"Insira um e-mail v\xe1lido."),_.qZA())}function M(e,t){1&e&&(_.TgZ(0,"span"),_._uU(1,"Insira um CPF v\xe1lido."),_.qZA())}function O(e,t){1&e&&(_.TgZ(0,"span"),_._uU(1,"Insira um celular v\xe1lido."),_.qZA())}function N(e,t){1&e&&(_.TgZ(0,"span"),_._uU(1,"Insira uma data de nascimento."),_.qZA())}function w(e,t){1&e&&(_.TgZ(0,"span"),_._uU(1,"Insira um CEP v\xe1lido."),_.qZA())}function E(e,t){1&e&&(_.TgZ(0,"span"),_._uU(1,"Insira uma cidade v\xe1lida."),_.qZA())}function k(e,t){1&e&&(_.TgZ(0,"span"),_._uU(1,"Insira um endere\xe7o v\xe1lido."),_.qZA())}function D(e,t){1&e&&(_.TgZ(0,"span"),_._uU(1,"Insira um UF v\xe1lido."),_.qZA())}function J(e,t){1&e&&_._UZ(0,"app-loader")}function y(e,t){if(1&e){const e=_.EpF();_.TgZ(0,"form",4),_.NdJ("ngSubmit",function(){return _.CHM(e),_.oxw().onSubmitFunc()}),_.TgZ(1,"div",5),_._UZ(2,"input",14),_.TgZ(3,"label"),_._uU(4,"Nome completo:"),_.qZA(),_.TgZ(5,"div",7),_.YNc(6,T,2,0,"span",8),_.qZA(),_.qZA(),_.TgZ(7,"div",5),_._UZ(8,"input",9),_.TgZ(9,"label"),_._uU(10,"E-mail:"),_.qZA(),_.TgZ(11,"div",7),_.YNc(12,P,2,0,"span",8),_.qZA(),_.qZA(),_.TgZ(13,"div",5),_._UZ(14,"input",10),_.TgZ(15,"label"),_._uU(16,"CPF:"),_.qZA(),_.TgZ(17,"div",7),_.YNc(18,M,2,0,"span",8),_.qZA(),_.qZA(),_.TgZ(19,"div",5),_._UZ(20,"input",15),_.TgZ(21,"label"),_._uU(22,"Celular:"),_.qZA(),_.TgZ(23,"div",7),_.YNc(24,O,2,0,"span",8),_.qZA(),_.qZA(),_.TgZ(25,"div",5),_._UZ(26,"input",12),_.TgZ(27,"label"),_._uU(28,"Data de nascimento:"),_.qZA(),_.TgZ(29,"div",7),_.YNc(30,N,2,0,"span",8),_.qZA(),_.qZA(),_.TgZ(31,"div",5),_.TgZ(32,"input",16),_.NdJ("keyup",function(){return _.CHM(e),_.oxw().fillCep()}),_.qZA(),_.TgZ(33,"label"),_._uU(34,"CEP:"),_.qZA(),_.TgZ(35,"div",7),_.YNc(36,w,2,0,"span",8),_.qZA(),_.qZA(),_.TgZ(37,"div",5),_._UZ(38,"input",17),_.TgZ(39,"label"),_._uU(40,"Cidade:"),_.qZA(),_.TgZ(41,"div",7),_.YNc(42,E,2,0,"span",8),_.qZA(),_.qZA(),_.TgZ(43,"div",5),_._UZ(44,"input",18),_.TgZ(45,"label"),_._uU(46,"Endere\xe7o:"),_.qZA(),_.TgZ(47,"div",7),_.YNc(48,k,2,0,"span",8),_.qZA(),_.qZA(),_.TgZ(49,"div",5),_._UZ(50,"input",19),_.TgZ(51,"label"),_._uU(52,"UF:"),_.qZA(),_.TgZ(53,"div",7),_.YNc(54,D,2,0,"span",8),_.qZA(),_.qZA(),_.TgZ(55,"div",13),_.TgZ(56,"button"),_._uU(57),_.YNc(58,J,1,0,"app-loader",8),_.qZA(),_.qZA(),_.qZA()}if(2&e){const e=_.oxw();_.Q6J("formGroup",e.funcForm),_.xp6(6),_.Q6J("ngIf",e.getFuncForm().nm_Funcionario.touched&&e.getFuncForm().nm_Funcionario.errors||e.getFuncForm().nm_Funcionario.errors&&e.submitted),_.xp6(6),_.Q6J("ngIf",e.getFuncForm().ds_Email.touched&&e.getFuncForm().ds_Email.errors||e.getFuncForm().ds_Email.errors&&e.submitted),_.xp6(2),_.uIk("disabled","true"),_.xp6(4),_.Q6J("ngIf",e.getFuncForm().cd_Cpf.touched&&e.getFuncForm().cd_Cpf.errors||e.getFuncForm().cd_Cpf.errors&&e.submitted),_.xp6(6),_.Q6J("ngIf",e.getFuncForm().cd_Celular.touched&&e.getFuncForm().cd_Celular.errors||e.getFuncForm().cd_Celular.errors&&e.submitted),_.xp6(2),_.uIk("disabled","true"),_.xp6(4),_.Q6J("ngIf",e.getFuncForm().dt_BirthDate.touched&&e.getFuncForm().dt_BirthDate.errors||e.getFuncForm().dt_BirthDate.errors&&e.submitted),_.xp6(6),_.Q6J("ngIf",e.getFuncForm().cd_Cep.touched&&e.getFuncForm().cd_Cep.errors||e.getFuncForm().cd_Cep.errors&&e.submitted),_.xp6(6),_.Q6J("ngIf",e.getFuncForm().ds_Cidade.touched&&e.getFuncForm().ds_Cidade.errors||e.getFuncForm().ds_Cidade.errors&&e.submitted),_.xp6(6),_.Q6J("ngIf",e.getFuncForm().ds_Endereco.touched&&e.getFuncForm().ds_Endereco.errors||e.getFuncForm().ds_Endereco.errors&&e.submitted),_.xp6(6),_.Q6J("ngIf",e.getFuncForm().sg_Uf.touched&&e.getFuncForm().sg_Uf.errors||e.getFuncForm().sg_Uf.errors&&e.submitted),_.xp6(3),_.hij(" ",e.loadingUpdate?"":"Atualizar dados"," "),_.xp6(1),_.Q6J("ngIf",e.loadingUpdate)}}function S(e,t){1&e&&_._UZ(0,"app-loader",20)}const Y=[{path:"",component:(()=>{class e{constructor(e,t,n){this.userService=e,this.clienteService=t,this.funcionariosService=n,this.loading=!1,this.loadingUpdate=!1,this.submitted=!1,this.form=new r.cw({nm_Cliente:new r.NI("",[r.kI.required,p.w.validateFullName]),cd_Cpf:new r.NI(""),cd_Celular:new r.NI("",[r.kI.required,r.kI.minLength(11),p.w.validatePhone]),dt_BirthDate:new r.NI("",[r.kI.required]),ds_Email:new r.NI("",[r.kI.required,r.kI.email])}),this.funcForm=new r.cw({nm_Funcionario:new r.NI("",[r.kI.required,p.w.validateFullName]),cd_Cpf:new r.NI(""),cd_Celular:new r.NI("",[r.kI.required,r.kI.minLength(11),p.w.validatePhone]),dt_BirthDate:new r.NI("",[r.kI.required]),ds_Email:new r.NI("",[r.kI.required,r.kI.email]),ds_Endereco:new r.NI("",[r.kI.required]),ds_Cidade:new r.NI("",[r.kI.required]),sg_Uf:new r.NI("",[r.kI.required,r.kI.maxLength(2),r.kI.minLength(2)]),cd_Cep:new r.NI("",[r.kI.required])}),this.faArrowLeft=d.acZ,this.clientId=this.userService.retornaUserId(),this.role=this.userService.retornaUserRole()}ngOnInit(){this.loading=!0,"ROLE_CLIENTE"===this.role?this.getClienteInfo():this.getFuncInfo()}getClienteInfo(){this.clienteService.getClientById(this.clientId).then(e=>{console.log(e),this.userData=e,this.setUserData(),this.loading=!1}).catch(e=>{console.log(e),this.loading=!1})}getFuncInfo(){this.funcionariosService.getFuncionarioById(+this.clientId).then(e=>{console.log(e),this.funcData=e,this.setFuncData(),this.loading=!1}).catch(e=>{console.log(e),this.loading=!1})}setUserData(){this.form.controls.cd_Cpf.setValue(this.userData.cd_Cpf),this.form.controls.nm_Cliente.setValue(this.userData.nm_Cliente),this.form.controls.cd_Celular.setValue(this.userData.cd_Celular),this.form.controls.ds_Email.setValue(this.userData.ds_Email),this.form.controls.dt_BirthDate.setValue(this.userData.dt_BirthDate)}setFuncData(){this.funcForm.controls.cd_Cpf.setValue(this.funcData.cd_Cpf),this.funcForm.controls.nm_Funcionario.setValue(this.funcData.nm_Funcionario),this.funcForm.controls.cd_Celular.setValue(this.funcData.cd_Celular),this.funcForm.controls.ds_Email.setValue(this.funcData.ds_Email),this.funcForm.controls.dt_BirthDate.setValue(this.funcData.dt_BirthDate),this.funcForm.controls.ds_Endereco.setValue(this.funcData.ds_Endereco),this.funcForm.controls.ds_Cidade.setValue(this.funcData.ds_Cidade),this.funcForm.controls.sg_Uf.setValue(this.funcData.sg_Uf),this.funcForm.controls.cd_Cep.setValue(this.funcData.cd_Cep)}getForm(){return this.form.controls}getFuncForm(){return this.funcForm.controls}onSubmit(){if(this.submitted=!0,this.form.valid){this.loadingUpdate=!0;const e=this.form.value;"("!==e.cd_Celular[0]&&(e.cd_Celular=(0,g.C)(this.form.controls.cd_Celular.value)),e.id=this.clientId,this.clienteService.updateClient(e).then(e=>{console.log(e),this.clienteService.dadosAtualizados.next(e),this.modal.open(),this.loadingUpdate=!1}).catch(e=>{console.log(e),this.loadingUpdate=!1})}}onSubmitFunc(){if(this.submitted=!0,this.funcForm.valid){this.loadingUpdate=!0;const e=this.funcForm.value;e.id=this.clientId,e.authority=this.role,"("!==e.cd_Celular[0]&&(e.cd_Celular=(0,g.C)(this.funcForm.controls.cd_Celular.value)),"-"!==e.cd_Cep[5]&&(e.cd_Cep=(0,m.h)(this.funcForm.controls.cd_Cep.value)),this.funcionariosService.updateAtendente(e).then(e=>{console.log(e),this.funcionariosService.dadosAtualizados.next(e),this.modal.open(),this.loadingUpdate=!1}).catch(e=>{console.log(e),this.loadingUpdate=!1})}}fillCep(){8===this.funcForm.controls.cd_Cep.value.length&&this.clienteService.getEndereco(this.funcForm.controls.cd_Cep.value).then(e=>{this.funcForm.controls.ds_Endereco.setValue(e.logradouro),this.funcForm.controls.ds_Cidade.setValue(e.localidade),this.funcForm.controls.sg_Uf.setValue(e.uf)}).catch(e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(_.Y36(f.K),_.Y36(h.$),_.Y36(C.a))},e.\u0275cmp=_.Xpm({type:e,selectors:[["app-profile"]],viewQuery:function(e,t){if(1&e&&_.Gf(u.S,5),2&e){let e;_.iGM(e=_.CRH())&&(t.modal=e.first)}},decls:7,vars:4,consts:[[1,"profile",3,"title"],[3,"formGroup","ngSubmit",4,"ngIf"],["color","dark",4,"ngIf"],["text","Dados atualizados com sucesso."],[3,"formGroup","ngSubmit"],[1,"label-float"],["type","text","placeholder"," ","name","nm_Cliente","id","nm_Cliente","formControlName","nm_Cliente"],[1,"error-msg"],[4,"ngIf"],["type","email","placeholder"," ","name","ds_Email","id","ds_Email","formControlName","ds_Email"],["type","text","placeholder"," ","name","cd_Cpf","id","cd_Cpf","formControlName","cd_Cpf","mask","000.000.000-00"],["type","text","placeholder"," ","name","cd_Celular","id","cd_Celular","formControlName","cd_Celular"],["type","date","placeholder"," ","name","dt_BirthDate","id","dt_BirthDate","formControlName","dt_BirthDate"],[1,"submit"],["type","text","placeholder"," ","name","nm_Funcionario","id","nm_Funcionario","formControlName","nm_Funcionario"],["type","text","placeholder"," ","name","cd_Celular","id","cd_Celular","formControlName","cd_Celular","mask","(00) 00000-0000"],["type","text","placeholder"," ","name","cd_Cep","id","cd_Cep","formControlName","cd_Cep","mask","00000-000",3,"keyup"],["type","text","placeholder"," ","name","ds_Cidade","id","ds_Cidade","formControlName","ds_Cidade"],["type","text","placeholder"," ","name","ds_Endereco","id","ds_Endereco","formControlName","ds_Endereco"],["type","text","placeholder"," ","name","sg_Uf","id","sg_Uf","formControlName","sg_Uf"],["color","dark"]],template:function(e,t){1&e&&(_.TgZ(0,"app-card-skeleton",0),_.TgZ(1,"h2"),_._uU(2,"Edite suas informa\xe7\xf5es abaixo: "),_.qZA(),_.YNc(3,x,35,10,"form",1),_.YNc(4,y,59,14,"form",1),_.YNc(5,S,1,0,"app-loader",2),_.qZA(),_._UZ(6,"app-info-modal",3)),2&e&&(_.Q6J("title","Perfil"),_.xp6(3),_.Q6J("ngIf",!t.loading&&"ROLE_CLIENTE"===t.role),_.xp6(1),_.Q6J("ngIf",!t.loading&&"ROLE_CLIENTE"!==t.role),_.xp6(1),_.Q6J("ngIf",t.loading))},directives:[Z.Y,o.O5,u.S,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,s.hx,F.R],styles:['@import url("https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap");.profile[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:repeat(1,1fr);grid-gap:0 32px;gap:0 32px}@media (min-width: 768px){.profile[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 1140px){.profile[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.profile[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .label-float[_ngcontent-%COMP%]{position:relative;height:56px;background:#0d1117;border-radius:4px;margin-bottom:32px;box-shadow:1px 4px 10px #0006}.profile[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .label-float[_ngcontent-%COMP%]   .error-msg[_ngcontent-%COMP%]{display:block;padding-left:16px;font-size:12px;color:#e54033;font-weight:200;margin-top:3px}.profile[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .label-float[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:6px 16px 0;color:#fff;border:0;width:100%;outline:none;min-width:180px;font-size:16px;transition:all .3s ease-out;-webkit-transition:all .3s ease-out;-moz-transition:all .3s ease-out;-webkit-appearance:none;border-radius:0;height:100%;background:#0000}.profile[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .label-float[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{background:#686460}.profile[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .label-float[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-bottom:2px solid #c6932b}.profile[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .label-float[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#0000}.profile[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .label-float[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:16px;pointer-events:none;position:absolute;top:0;left:0;margin-top:18px;transition:all .3s ease-out;-webkit-transition:all .3s ease-out;-moz-transition:all .3s ease-out;color:#fff}.profile[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .label-float[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .profile[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .label-float[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%]{font-size:12px;margin-top:6px;color:#c6932b}.profile[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{width:100%}.profile[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#c6932b;color:#fff;font-weight:700;text-align:center;width:100%;height:56px;border-radius:4px;text-transform:uppercase}']}),e})()}];let Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=_.oAB({type:e}),e.\u0275inj=_.cJS({imports:[[c.Bz.forChild(Y)],c.Bz]}),e})(),B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=_.oAB({type:e}),e.\u0275inj=_.cJS({imports:[[o.ez,Q,r.UX,i.uH,a.m,l.IJ,s.yI.forChild()]]}),e})()}}]);